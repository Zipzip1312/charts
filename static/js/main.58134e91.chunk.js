(this.webpackJsonpcharts=this.webpackJsonpcharts||[]).push([[0],{147:function(t,e,a){},148:function(t,e,a){},205:function(t){t.exports=JSON.parse('{"type":"object","properties":{"total":{"type":"integer"},"Android":{"type":"integer"},"iOS":{"type":"integer"},"platforms":{"type":"array","items":{"type":"string"}},"months":{"type":"array","items":{"type":"string"}},"downloadsByMonths":{"type":"object","items":{"type":"object","properties":{"Android":{"type":"array"},"iOS":{"type":"array"}}}}},"required":["total","Android","iOS","platforms","months","downloadsByMonths"]}')},314:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(20),s=a.n(o),i=(a(147),a(148),a(42)),c=a(343),d=a(345),l=a(356),p=a(346),u=a(130),j=a.n(u),b=a(8),m=a(84),f=a.n(m),O=a(127),h=a(62),g=a(128),y=a.n(g).a.create({baseURL:"https://moble.epicentrk.ua/api/",headers:{"content-type":"application/json"},responseType:"json"});y.interceptors.request.use((function(t){var e=localStorage.getItem("amp_code");return e&&(t.url+="/".concat(e)),t}),(function(t){return Promise.reject(t)}));var x,v=y,S={total:0,Android:0,iOS:0,months:[],downloadsByMonths:{Android:[],iOS:[]}},w={total:(x=S).total,Android:x.Android,iOS:x.iOS},A=S,B=a(129),I=a.n(B);var C=function(t){var e=new I.a,n=a(205),r=e.compile(n);for(var o in t)if(Object.hasOwnProperty.call(t,o)&&!r(t[o]))throw new Error("Amplitude Update Error!\nTry again later")},N=a(64);var k=function(t){return JSON.parse(JSON.stringify(t))};var M=function(t){var e=k(A);for(var a in t){var n,r,o;if(Object.hasOwnProperty.call(t,a))e.total+=t[a].total,e.Android+=t[a].Android,e.iOS+=t[a].iOS,(n=e.months).push.apply(n,Object(N.a)(t[a].months)),(r=e.downloadsByMonths.Android).push.apply(r,Object(N.a)(t[a].downloadsByMonths.Android)),(o=e.downloadsByMonths.iOS).push.apply(o,Object(N.a)(t[a].downloadsByMonths.iOS))}return e},D=function(t){var e=new Date(t).toDateString().split(" "),a=Object(i.a)(e,4),n=(a[0],a[1]);return a[2]+" "+n+" "+a[3]},E=Object(h.b)({name:"app",initialState:{code:"",pending:!0,isLoggedIn:!1,data:A,dataByYears:{},filterByYear:"total",increments:w,lastUpdateDate:null,serverError:!1,serverErrorMessage:""},reducers:{setCode:function(t,e){t.code=e.payload,localStorage.setItem("amp_code",e.payload)},setPending:function(t,e){t.pending=e.payload},setIsLoggedIn:function(t,e){t.isLoggedIn=e.payload},setData:function(t,e){t.data=M(e.payload),t.dataByYears=e.payload;var a=D(new Date);t.lastUpdateDate=a,localStorage.setItem("amp_last_update",a)},setIncrements:function(t,e){t.increments=e.payload},resetIncrements:function(t){t.increments=w},getDataByYear:function(t,e){var a=e.payload;a in t.dataByYears?t.data=t.dataByYears[a]:t.data=M(t.dataByYears),t.filterByYear=a},handleServerError:function(t,e){t.serverError=!0,t.serverErrorMessage=e.payload;var a=JSON.parse(localStorage.getItem("former_downloads_data"));a&&(t.data=a,t.isLoggedIn=!0,t.lastUpdateDate=localStorage.getItem("amp_last_update"))}}}),Y=E.actions,_=(Y.setCode,Y.setPending),L=Y.setIsLoggedIn,T=Y.setData,J=Y.setIncrements,P=Y.resetIncrements,W=Y.getDataByYear,F=(Y.getDataByPlatform,Y.handleServerError),H=E.reducer;function U(){return function(){var t=Object(O.a)(f.a.mark((function t(e){var a,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(_(!0)),t.prev=1,t.next=4,v.get("app-downloads");case 4:a=t.sent,C(a.data),e(T(a.data)),e(L(!0)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),t.t0.response&&403===t.t0.response.status?e(L(!1)):((n=t.t0.message).includes("429")&&(n="\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u043b\u0438\u0441\u044c! \n\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u0447\u0435\u0440\u0435\u0437 \u043c\u0438\u043d\u0443\u0442\u0443"),e(F(n)));case 13:return t.prev=13,e(_(!1)),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})));return function(e){return t.apply(this,arguments)}}()}var z=a(2),R=Object(c.a)((function(t){return{root:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},input:{fontSize:"32px",maxWidth:"185px",marginRight:"10px"},buttonWrapper:{position:"relative","& > button":{padding:"13px 26px"}}}}));function q(){var t=R(),e=Object(n.useState)(""),a=Object(i.a)(e,2),r=a[0],o=a[1],s=Object(n.useState)(!1),c=Object(i.a)(s,2),u=c[0],m=c[1],f=Object(b.b)(),O=function(){localStorage.setItem("amp_code",r),f(U())};return Object(z.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",onSubmit:O,children:[Object(z.jsx)(d.a,{children:Object(z.jsx)(l.a,{className:t.input,placeholder:"CODE",value:r,onChange:function(t){var e=t.target.value;o(e),m(10===e.length)},autoFocus:!0,required:!0,type:"number"})}),Object(z.jsx)("div",{className:t.buttonWrapper,children:Object(z.jsx)(p.a,{variant:"contained",color:"primary",disabled:!u,onClick:O,type:"submit",children:Object(z.jsx)(j.a,{})})})]})}var Z=a(347),V=Object(c.a)((function(t){return{root:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"}}}));function X(){var t=V();return Object(z.jsx)("div",{className:t.root,children:Object(z.jsx)(Z.a,{})})}var G=a(351),K=a(357),Q=a(358),$=a(137),tt=a(348),et=a(349),at=a(350),nt=a(131),rt=a.n(nt),ot=a(132),st=a.n(ot),it=a(133),ct=a.n(it),dt=Object($.a)({palette:{primary:{main:"#0071d3"},platforms:{total:tt.a[500],Android:et.a[500],iOS:at.a[500]}},icons:{total:Object(z.jsx)(rt.a,{}),Android:Object(z.jsx)(st.a,{}),iOS:Object(z.jsx)(ct.a,{})}});var lt=function(t){for(var e=t.toString().split("").reverse(),a=[e[0]],n=1;n<e.length;n++)n%3===0&&a.push(" "),a.push(e[n]);return a.reverse()},pt=Object(c.a)({root:{maxWidth:"300px",width:"100%",margin:"0 auto 1em",position:"relative","& .MuiCardHeader-title":{fontSize:"1.7em",textIndent:"-1em",fontWeight:500},"& .MuiCardHeader-subheader":{position:"absolute",right:"1em",top:"50%",transform:"translateY(-50%)",color:dt.palette.success.main,transition:"all .3s"}},totalDownloadsHeader:{"& .MuiCardHeader-content":{marginTop:"-1em"}},updateDate:{width:"100%",position:"absolute",bottom:"1em",left:"50%",color:"#9e9e9e",transform:"translateX(-50%)",textIndent:"3em",fontSize:".8em"}});function ut(t){var e=t.platform,a=t.downloads,n=pt(),r=Object(b.b)(),o=Object(b.c)((function(t){return t.app.increments[e]})),s=Object(b.c)((function(t){return t.app.lastUpdateDate})),i=Object(b.c)((function(t){return t.app.filterByYear})),c=o!==a&&o>0&&"total"===i&&"+".concat(o);return Object(z.jsxs)(G.a,{className:n.root,children:[Object(z.jsx)(K.a,{className:"total"===e?n.totalDownloadsHeader:"",avatar:Object(z.jsx)(Q.a,{"aria-label":"recipe",style:{backgroundColor:dt.palette.platforms[e]},onClick:function(){return"total"===e&&r(U())},children:dt.icons[e]}),title:lt(a),subheader:c}),"total"===e&&s&&Object(z.jsx)("div",{className:n.updateDate,children:s})]})}var jt=Object(c.a)({root:{display:"flex",justifyContent:"center",margin:"1em auto 0","& > button":{margin:"0 .45em"}}});function bt(){var t=jt(),e=Object(b.c)((function(t){return t.app.dataByYears})),a=Object(b.c)((function(t){return t.app.filterByYear})),n=Object(b.b)(),r=Object.keys(e).reverse().map((function(t,e){return Object(z.jsx)(p.a,{variant:a===t?"contained":"outlined",color:"primary",onClick:function(){return n(W(t))},children:t},e)}));return Object(z.jsxs)("div",{className:t.root,children:[Object(z.jsx)(p.a,{variant:"total"===a?"contained":"outlined",color:"primary",onClick:function(){return n(W("total"))},children:"All"}),r]})}var mt=a(28);function ft(t){var e=t.downloads,a=function(){var t=["Android","iOS"],a=e.reduce((function(t,e){return t+e}));return t.forEach((function(n,r){t[r]=n+" "+(e[r]/a*100).toFixed(2)+"%"})),t},n={labels:a(),datasets:[{label:a(),data:e,backgroundColor:[dt.palette.platforms.Android,dt.palette.platforms.iOS],borderWidth:1}]};return Object(z.jsx)("div",{children:Object(z.jsx)(mt.c,{data:n,options:{tooltips:{enabled:!1},legend:{display:!0,reverse:!0,onClick:function(){}}}})})}function Ot(t){var e=t.months,a=t.downloadsByMonths,n={labels:e,datasets:[{label:"Android",data:a.Android,backgroundColor:dt.palette.platforms.Android},{label:"iOS",data:a.iOS,backgroundColor:dt.palette.platforms.iOS}]};return Object(z.jsx)(mt.a,{data:n,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]},legend:{display:!1}}})}function ht(t){for(var e=t.months,a=t.downloadsByMonths,n=[],r=0;r<a.Android.length;r++)n.push(a.Android[r]+a.iOS[r]);var o={labels:e,datasets:[{label:"",data:n,backgroundColor:tt.a[500],fill:!1,pointRadius:6,pointHoverRadius:10}]};return Object(z.jsx)(mt.b,{data:o,options:{legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}var gt=a(355),yt=Object(c.a)({root:{justifyContent:"center",marginTop:"1em"}});function xt(){var t=yt(),e=Object(b.c)((function(t){return t.app.serverErrorMessage}));return Object(z.jsx)(gt.a,{className:t.root,severity:"error",children:e||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435, \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u043b\u0438\u0441\u044c!"})}var vt=a(136),St=a.n(vt),wt=a(63),At=Object(c.a)({root:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:wt.a[900]},icon:{fontSize:100},message:{fontSize:30,marginTop:30}});function Bt(){var t=At(),e=Object(b.c)((function(t){return t.app.serverErrorMessage}));return Object(z.jsxs)("div",{className:t.root,children:[Object(z.jsx)(St.a,{className:t.icon}),Object(z.jsx)("div",{className:t.message,children:e})]})}var It=a(352),Ct=Object(c.a)({root:{width:"100%",maxWidth:"600px",marginLeft:"auto",marginRight:"auto",padding:10},block:{marginTop:"1.5em"},standout:{marginTop:"1.5em",marginBottom:"1em"}});var Nt=function(){var t=Ct(),e=Object(b.c)((function(t){return t.app.pending})),a=Object(b.c)((function(t){return t.app.data})),r=Object(b.c)((function(t){return t.app.isLoggedIn})),o=Object(b.c)((function(t){return t.app.serverError})),s=Object(b.b)();return Object(n.useEffect)((function(){s(U())}),[s]),e?Object(z.jsx)(X,{}):r?Object(z.jsxs)("div",{className:t.root,children:[Object(z.jsxs)(It.a,{container:!0,children:[Object(z.jsx)(It.a,{item:!0,xs:12,className:t.standout,children:Object(z.jsx)(ut,{platform:"total",downloads:a.total})}),Object(z.jsx)(It.a,{item:!0,xs:12,children:Object(z.jsx)(ut,{platform:"Android",downloads:a.Android})}),Object(z.jsx)(It.a,{item:!0,xs:12,children:Object(z.jsx)(ut,{platform:"iOS",downloads:a.iOS})}),Object(z.jsx)(It.a,{item:!0,xs:12,children:o?Object(z.jsx)(xt,{}):Object(z.jsx)(bt,{})}),Object(z.jsx)(It.a,{item:!0,xs:12,className:t.block,children:Object(z.jsx)(ht,{months:a.months,downloadsByMonths:a.downloadsByMonths})}),Object(z.jsx)(It.a,{item:!0,xs:12,className:t.block,children:Object(z.jsx)(Ot,{months:a.months,downloadsByMonths:a.downloadsByMonths})}),Object(z.jsx)(It.a,{item:!0,xs:12,className:t.standout,children:Object(z.jsx)(ft,{downloads:[a.Android,a.iOS]})})]}),Object(z.jsx)("br",{})]}):o?Object(z.jsx)(Bt,{}):Object(z.jsx)(q,{})},kt=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,359)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,o=e.getLCP,s=e.getTTFB;a(t),n(t),r(t),o(t),s(t)}))},Mt=function(t){return function(e){return function(a){if(e(a),"app/setData"===a.type){var n=k(w),r=t.getState().app.data,o=JSON.parse(localStorage.getItem("former_downloads_data"));if(o)for(var s=0,i=Object.keys(n);s<i.length;s++){var c=i[s];n[c]=r[c]-o[c]}t.dispatch(J(n)),localStorage.setItem("former_downloads_data",JSON.stringify(r)),setTimeout((function(){t.dispatch(P())}),3e5)}}}},Dt=Object(h.a)({reducer:{app:H},middleware:function(t){return t().concat(Mt)}}),Et=a(353),Yt=a(354);s.a.render(Object(z.jsxs)(r.a.StrictMode,{children:[Object(z.jsx)(Et.a,{}),Object(z.jsx)(Yt.a,{theme:dt,children:Object(z.jsx)(b.a,{store:Dt,children:Object(z.jsx)("div",{className:"App",children:Object(z.jsx)(Nt,{})})})})]}),document.getElementById("root")),kt()}},[[314,1,2]]]);
//# sourceMappingURL=main.58134e91.chunk.js.map