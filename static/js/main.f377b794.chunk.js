(this.webpackJsonpcharts=this.webpackJsonpcharts||[]).push([[0],{154:function(t,e,a){},155:function(t,e,a){},212:function(t){t.exports=JSON.parse('{"type":"object","properties":{"total":{"type":"integer"},"Android":{"type":"integer"},"iOS":{"type":"integer"},"platforms":{"type":"array","items":{"type":"string"}},"months":{"type":"array","items":{"type":"string"}},"downloadsByMonths":{"type":"object","items":{"type":"object","properties":{"Android":{"type":"array"},"iOS":{"type":"array"}}}}},"required":["total","Android","iOS","platforms","months","downloadsByMonths"]}')},321:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),o=a(22),s=a.n(o),i=(a(154),a(155),a(46)),c=a(351),d=a(353),l=a(366),p=a(354),u=a(137),j=a.n(u),b=a(7),m=a(89),f=a.n(m),O=a(134),h=a(66),g=a(135),v=a.n(g).a.create({baseURL:"https://moble.epicentrk.ua/api/",headers:{"content-type":"application/json"},responseType:"json"});v.interceptors.request.use((function(t){var e=localStorage.getItem("amp_code");return e&&(t.url+="/".concat(e)),t}),(function(t){return Promise.reject(t)}));var y,x=v,S={total:0,Android:0,iOS:0,months:[],downloadsByMonths:{Android:[],iOS:[]}},w={total:(y=S).total,Android:y.Android,iOS:y.iOS},A=S,B=a(136),C=a.n(B);var I=function(t){var e=new C.a,r=a(212),n=e.compile(r);for(var o in t)if(Object.hasOwnProperty.call(t,o)&&!n(t[o]))throw new Error("Amplitude Update Error!\nTry again later")},N=a(68);var M=function(t){return JSON.parse(JSON.stringify(t))};var k=function(t){var e=M(A);for(var a in t){var r,n,o;if(Object.hasOwnProperty.call(t,a))e.total+=t[a].total,e.Android+=t[a].Android,e.iOS+=t[a].iOS,(r=e.months).push.apply(r,Object(N.a)(t[a].months)),(n=e.downloadsByMonths.Android).push.apply(n,Object(N.a)(t[a].downloadsByMonths.Android)),(o=e.downloadsByMonths.iOS).push.apply(o,Object(N.a)(t[a].downloadsByMonths.iOS))}return e},D=function(t){var e=new Date(t).toDateString().split(" "),a=Object(i.a)(e,4),r=(a[0],a[1]);return a[2]+" "+r+" "+a[3]},E="\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u043b\u0438\u0441\u044c! \n\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u0447\u0435\u0440\u0435\u0437 \u043c\u0438\u043d\u0443\u0442\u0443",T=Object(h.b)({name:"app",initialState:{code:"",pending:!0,isLoggedIn:!1,data:A,dataByYears:{},dataType:"downloads",filterByYear:"total",increments:w,lastUpdateDate:null,serverError:!1,serverErrorMessage:""},reducers:{setCode:function(t,e){t.code=e.payload,localStorage.setItem("amp_code",e.payload)},setPending:function(t,e){t.pending=e.payload},setIsLoggedIn:function(t,e){t.isLoggedIn=e.payload},setData:function(t,e){var a=e.payload;t.data=k(a.data),t.dataByYears=a.data;var r=D(new Date);t.lastUpdateDate=r,localStorage.setItem("amp_last_".concat(a.type),r)},setDataType:function(t,e){t.dataType=e.payload},setIncrements:function(t,e){t.increments=e.payload},resetIncrements:function(t){t.increments=w},getDataByYear:function(t,e){var a=e.payload;a in t.dataByYears?t.data=t.dataByYears[a]:t.data=k(t.dataByYears),t.filterByYear=a},handleServerError:function(t,e){t.serverError=!0,t.serverErrorMessage=e.payload;var a=JSON.parse(localStorage.getItem("former_downloads_data"));a&&(t.data=a,t.isLoggedIn=!0,t.lastUpdateDate=localStorage.getItem("amp_last_update"))},removeServerError:function(t){t.serverError=!1,t.serverErrorMessage=""}}}),Y=T.actions,_=(Y.setCode,Y.setPending),L=Y.setIsLoggedIn,J=Y.setData,W=Y.setIncrements,F=Y.resetIncrements,H=Y.getDataByYear,P=Y.setDataType,U=Y.handleServerError,z=Y.removeServerError,R=T.reducer;function q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"downloads";return function(){var e=Object(O.a)(f.a.mark((function e(a){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(_(!0)),a(P(t)),a(z()),e.prev=3,e.next=6,x.get("app-".concat(t));case 6:r=e.sent,I(r.data),a(J({data:r.data,type:t})),a(L(!0)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),e.t0.response&&403===e.t0.response.status?a(L(!1)):((n=e.t0.message).includes("429")&&(n=E),a(U(n)));case 15:return e.prev=15,a(_(!1)),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}var Z=a(2),G=Object(c.a)((function(t){return{root:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},input:{fontSize:32,width:190,marginRight:10},buttonWrapper:{position:"relative","& > button":{padding:"13px 26px"}}}}));function V(){var t=G(),e=Object(r.useState)(""),a=Object(i.a)(e,2),n=a[0],o=a[1],s=Object(r.useState)(!1),c=Object(i.a)(s,2),u=c[0],m=c[1],f=Object(b.b)(),O=function(){localStorage.setItem("amp_code",n),f(q())};return Object(Z.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",onSubmit:O,children:[Object(Z.jsx)(d.a,{children:Object(Z.jsx)(l.a,{className:t.input,placeholder:"CODE",value:n,onChange:function(t){var e=t.target.value;o(e),m(10===e.length)},autoFocus:!0,required:!0})}),Object(Z.jsx)("div",{className:t.buttonWrapper,children:Object(Z.jsx)(p.a,{variant:"contained",color:"primary",disabled:!u,onClick:O,type:"submit",children:Object(Z.jsx)(j.a,{})})})]})}var X=a(144),K=a(355),Q=a(356),$=a(357),tt=a(90),et=a.n(tt),at=a(138),rt=a.n(at),nt=a(139),ot=a.n(nt),st=a(140),it=a.n(st),ct=Object(X.a)({palette:{primary:{main:"#0071d3"},platforms:{total:K.a[500],Android:Q.a[500],iOS:$.a[500]}},icons:{total:Object(Z.jsx)(et.a,{}),Android:Object(Z.jsx)(rt.a,{}),iOS:Object(Z.jsx)(ot.a,{}),downloads:Object(Z.jsx)(et.a,{}),active:Object(Z.jsx)(it.a,{})}}),dt=a(358),lt=a(364),pt=a(359),ut=Object(c.a)({root:{flexGrow:1,maxWidth:300,margin:"auto"},tab:{minHeight:50,"& .MuiTab-wrapper":{flexDirection:"row",alignItems:"flex-start"}}});function jt(){var t=ut(),e=Object(b.c)((function(t){return t.app.dataType})),a=Object(b.b)();return Object(Z.jsx)(dt.a,{className:t.root,children:Object(Z.jsx)(lt.a,{value:e,onChange:function(t,e){a(q(e))},variant:"fullWidth",indicatorColor:"primary",textColor:"primary","aria-label":"navigation",children:["downloads","active"].map((function(e,a){return Object(Z.jsx)(pt.a,{icon:ct.icons[e],value:e,label:e,className:t.tab},a)}))})})}var bt=a(360),mt=Object(c.a)((function(t){return{progress:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"}}}));function ft(){var t=mt(),e=Object(b.c)((function(t){return t.app.isLoggedIn}));return Object(Z.jsxs)(Z.Fragment,{children:[e&&Object(Z.jsx)(jt,{}),Object(Z.jsx)("div",{className:t.progress,children:Object(Z.jsx)(bt.a,{})})]})}var Ot=a(367),ht=a(368);var gt=function(t){for(var e=t.toString().split("").reverse(),a=[e[0]],r=1;r<e.length;r++)r%3===0&&a.push(" "),a.push(e[r]);return a.reverse()},vt=Object(c.a)({root:{maxWidth:300,width:"100%",margin:"0 auto 1em",position:"relative","& .MuiCardHeader-title":{fontSize:"1.7em",textIndent:"-1em",fontWeight:500},"& .MuiCardHeader-subheader":{position:"absolute",right:"1em",top:"50%",transform:"translateY(-50%)",color:ct.palette.success.main,transition:"all .3s"}},totalDownloadsHeader:{"& .MuiCardHeader-content":{marginTop:"-1em"}},updateDate:{width:"100%",position:"absolute",bottom:"1em",left:"50%",color:"#9e9e9e",transform:"translateX(-50%)",textIndent:"3em",fontSize:".8em"}});function yt(t){var e=t.platform,a=t.downloads,r=vt(),n=Object(b.b)(),o=Object(b.c)((function(t){return t.app.increments[e]})),s=Object(b.c)((function(t){return t.app.lastUpdateDate})),i=Object(b.c)((function(t){return t.app.filterByYear})),c=Object(b.c)((function(t){return t.app.dataType})),d=o!==a&&o>0&&"total"===i&&"+".concat(o);return Object(Z.jsxs)(dt.a,{className:r.root,children:[Object(Z.jsx)(Ot.a,{className:"total"===e?r.totalDownloadsHeader:"",avatar:Object(Z.jsx)(ht.a,{"aria-label":"recipe",style:{backgroundColor:ct.palette.platforms[e]},onClick:function(){return"total"===e&&n(q(c))},children:ct.icons["total"===e?c:e]}),title:gt(a),subheader:d}),"total"===e&&s&&Object(Z.jsx)("div",{className:r.updateDate,children:s})]})}var xt=Object(c.a)({root:{display:"flex",justifyContent:"center",margin:"1em auto 0","& > button":{margin:"0 .45em"}}});function St(){var t=xt(),e=Object(b.c)((function(t){return t.app.dataByYears})),a=Object(b.c)((function(t){return t.app.filterByYear})),r=Object(b.b)(),n=Object.keys(e).reverse().map((function(t,e){return Object(Z.jsx)(p.a,{variant:a===t?"contained":"outlined",color:"primary",onClick:function(){return r(H(t))},children:t},e)}));return Object(Z.jsxs)("div",{className:t.root,children:[Object(Z.jsx)(p.a,{variant:"total"===a?"contained":"outlined",color:"primary",onClick:function(){return r(H("total"))},children:"All"}),n]})}var wt=a(35);function At(t){var e=t.downloads,a=function(){var t=["Android","iOS"],a=e.reduce((function(t,e){return t+e}));return t.forEach((function(r,n){t[n]=r+" "+(e[n]/a*100).toFixed(2)+"%"})),t},r={labels:a(),datasets:[{label:a(),data:e,backgroundColor:[ct.palette.platforms.Android,ct.palette.platforms.iOS],borderWidth:1}]};return Object(Z.jsx)("div",{children:Object(Z.jsx)(wt.c,{data:r,options:{tooltips:{enabled:!1},legend:{display:!0,reverse:!0,onClick:function(){}}}})})}function Bt(t){var e=t.months,a=t.downloadsByMonths,r={labels:e,datasets:[{label:"Android",data:a.Android,backgroundColor:ct.palette.platforms.Android},{label:"iOS",data:a.iOS,backgroundColor:ct.palette.platforms.iOS}]};return Object(Z.jsx)(wt.a,{data:r,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]},legend:{display:!1}}})}function Ct(t){for(var e=t.months,a=t.downloadsByMonths,r=[],n=0;n<a.Android.length;n++)r.push(a.Android[n]+a.iOS[n]);var o={labels:e,datasets:[{label:"",data:r,backgroundColor:K.a[500],fill:!1,pointRadius:6,pointHoverRadius:10}]};return Object(Z.jsx)(wt.b,{data:o,options:{legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}var It=a(365),Nt=Object(c.a)({root:{justifyContent:"center",marginTop:"1em"}});function Mt(){var t=Nt(),e=Object(b.c)((function(t){return t.app.serverErrorMessage}));return Object(Z.jsx)(It.a,{className:t.root,severity:"error",children:e||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435, \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u043b\u0438\u0441\u044c!"})}var kt=a(143),Dt=a.n(kt),Et=a(67),Tt=Object(c.a)({root:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:Et.a[900]},icon:{fontSize:100},message:{fontSize:30,marginTop:30}});function Yt(){var t=Tt(),e=Object(b.c)((function(t){return t.app.serverErrorMessage}));return Object(Z.jsxs)("div",{className:t.root,children:[Object(Z.jsx)(Dt.a,{className:t.icon}),Object(Z.jsx)("div",{className:t.message,children:e})]})}var _t=a(361),Lt=Object(c.a)({root:{width:"100%",maxWidth:"600px",marginLeft:"auto",marginRight:"auto"},block:{marginTop:"1.5em"},standout:{marginTop:"1.5em",marginBottom:"1em"}});var Jt=function(){var t=Lt(),e=Object(b.c)((function(t){return t.app.pending})),a=Object(b.c)((function(t){return t.app.data})),n=Object(b.c)((function(t){return t.app.isLoggedIn})),o=Object(b.c)((function(t){return t.app.serverError})),s=Object(b.b)();return Object(r.useEffect)((function(){s(q())}),[s]),e?Object(Z.jsx)(ft,{}):n?Object(Z.jsxs)("div",{className:t.root,children:[Object(Z.jsxs)(_t.a,{container:!0,children:[Object(Z.jsx)(_t.a,{item:!0,xs:12,children:Object(Z.jsx)(jt,{})}),Object(Z.jsx)(_t.a,{item:!0,xs:12,className:t.standout,children:Object(Z.jsx)(yt,{platform:"total",downloads:a.total})}),Object(Z.jsx)(_t.a,{item:!0,xs:12,children:Object(Z.jsx)(yt,{platform:"Android",downloads:a.Android})}),Object(Z.jsx)(_t.a,{item:!0,xs:12,children:Object(Z.jsx)(yt,{platform:"iOS",downloads:a.iOS})}),Object(Z.jsx)(_t.a,{item:!0,xs:12,children:o?Object(Z.jsx)(Mt,{}):Object(Z.jsx)(St,{})}),Object(Z.jsx)(_t.a,{item:!0,xs:12,className:t.block,children:Object(Z.jsx)(Ct,{months:a.months,downloadsByMonths:a.downloadsByMonths})}),Object(Z.jsx)(_t.a,{item:!0,xs:12,className:t.block,children:Object(Z.jsx)(Bt,{months:a.months,downloadsByMonths:a.downloadsByMonths})}),Object(Z.jsx)(_t.a,{item:!0,xs:12,className:t.standout,children:Object(Z.jsx)(At,{downloads:[a.Android,a.iOS]})})]}),Object(Z.jsx)("br",{})]}):o?Object(Z.jsx)(Yt,{}):Object(Z.jsx)(V,{})},Wt=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,369)).then((function(e){var a=e.getCLS,r=e.getFID,n=e.getFCP,o=e.getLCP,s=e.getTTFB;a(t),r(t),n(t),o(t),s(t)}))},Ft=function(t){return function(e){return function(a){if(e(a),"app/setData"===a.type){var r=a.payload.type,n=M(w),o=t.getState().app.data,s=JSON.parse(localStorage.getItem("former_".concat(r,"_data")));if(s)for(var i=0,c=Object.keys(n);i<c.length;i++){var d=c[i];n[d]=o[d]-s[d]}t.dispatch(W(n)),localStorage.setItem("former_".concat(r,"_data"),JSON.stringify(o));var l=t.getState().app.filterByYear;"total"!==l&&t.dispatch(H(l)),setTimeout((function(){t.dispatch(F())}),3e5)}}}},Ht=Object(h.a)({reducer:{app:R},middleware:function(t){return t().concat(Ft)}}),Pt=a(362),Ut=a(363);s.a.render(Object(Z.jsxs)(n.a.StrictMode,{children:[Object(Z.jsx)(Pt.a,{}),Object(Z.jsx)(Ut.a,{theme:ct,children:Object(Z.jsx)(b.a,{store:Ht,children:Object(Z.jsx)("div",{className:"App",children:Object(Z.jsx)(Jt,{})})})})]}),document.getElementById("root")),Wt()}},[[321,1,2]]]);
//# sourceMappingURL=main.f377b794.chunk.js.map